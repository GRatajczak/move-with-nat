---
import AdminLayout from "../../../layouts/AdminLayout.astro";
import { AdminCreatePlanContainer } from "../../../components/plans/create/AdminCreatePlanContainer";

// Check authorization in middleware
const { locals } = Astro;
const user = locals.user;

if (!user || user.role !== "admin") {
  return Astro.redirect("/");
}
---

<AdminLayout>
  <AdminCreatePlanContainer client:load userRole="admin" />
</AdminLayout>
